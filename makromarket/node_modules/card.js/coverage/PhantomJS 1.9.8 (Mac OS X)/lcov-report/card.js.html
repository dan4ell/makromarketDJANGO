<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for ./card.js</title>
    <meta charset="utf-8">

    <link rel="stylesheet" href="prettify.css">

    <link rel="stylesheet" href="base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">./card.js</span></h1>
    <h2>
        
        Statements: <span class="metric">96.97% <small>(32 / 33)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">88.89% <small>(16 / 18)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">100% <small>(10 / 10)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">96.97% <small>(32 / 33)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="index.html">All files</a> &#187; <a href="index.html">./</a> &#187; card.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">34</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">32</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">90</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-yes">96</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">79</span>
<span class="cline-any cline-yes">79</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*! card.js v0.0.1 https://github.com/coffeedriven/cardjs/LICENCE */
&nbsp;
;(function ( global ) {
    'use strict';
&nbsp;
    /*
      card.js v0.0.1
      A JavaScript library for card type detection.
      https://github.com/coffeedriven/cardjs/
      Copyright (c) 2015 Maciej Dzikowicki &lt;mdzikowicki@gmail.com&gt;
      MIT Licence
    */
&nbsp;
    var card = function(number) {
      if (typeof number !== 'string') {
        throw new TypeError('cardNumber must be a string!');
      }
&nbsp;
      var cardNumber = number.trim().replace(/\s/g, '');
&nbsp;
      return new Card(cardNumber);
    };
&nbsp;
    card.CARD_TYPES = [
      {type: 'visa', numberRegex: /^4[0-9]{12}(?:[0-9]{3})?$/, iinNumberRegex: /^4/},
      {type: 'mastercard', numberRegex:/^5[1-5][0-9]{14}$/, iinNumberRegex: /^5[1-5]/},
      {type: 'amex', numberRegex:/^3[47][0-9]{13}$/, iinNumberRegex: /^3[47]/},
      {type: 'maestro', numberRegex:/^(?:5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\d{12}(?:\d\d)?$/, iinNumberRegex: /^(?:5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)/},
      {type: 'diners', numberRegex:/^3(?:0[0-5]|[68][0-9])[0-9]{4,}$/, iinNumberRegex: /^3(?:0[0-5]|[68][0-9])/},
      {type: 'discover', numberRegex:/^6(?:011|5[0-9]{2})[0-9]{12}$/, iinNumberRegex: /^6(?:011|5)/},
      {type: 'jcb', numberRegex:/^(?:2131|1800|35[0-9]{3})[0-9]{3,}$/, iinNumberRegex: /^(?:2131|1800|35[0-9]{2})/},
      {type: 'uatp', numberRegex:/^1[0-9]{14}$/, iinNumberRegex:/^1/},
      {type: 'interpayment', numberRegex:/^(636)\d{13,16}$/, iinNumberRegex:/^(636)/},
      {type: 'instapayment', numberRegex:/^(63[7-9])\d{13}$/, iinNumberRegex:/^(63[7-9])/},
      {type: 'unionpay', numberRegex:/^(62|88)\d{14,17}$/, iinNumberRegex:/^(62|88)/},
      {type: 'dankort', numberRegex:/^(5019)\d{12}$/, iinNumberRegex:/^(5019)/}
    ];
&nbsp;
    var Card = function(cardNumber) {
      this._cardNumber = cardNumber;
    };
&nbsp;
    Card.prototype.isValid = function() {
      return luhnChk(this._cardNumber);
    };
    Card.prototype.getType = function() {
      var cardType = null;
      var cardNumber = this._cardNumber;
      card.CARD_TYPES.some(function(type) {
        return type.numberRegex.test(cardNumber) ? (cardType = type, true) : false;
      });
      return !!cardType ? cardType.type : undefined;
    };
&nbsp;
    Card.prototype.getIINType = function() {
      var cardType = null;
      var cardNumber = this._cardNumber;
      card.CARD_TYPES.some(function(type) {
        return type.iinNumberRegex.test(cardNumber) ? (cardType = type, true) : false;
      });
      return !!cardType ? cardType.type : undefined;
    };
&nbsp;
    /**
     * Implementation thanks to gist: https://gist.github.com/ShirtlessKirk/2134376
     */
    var luhnChk = (function(arr) {
      return function(ccNum) {
        var
            len = ccNum.length,
            bit = 1,
            sum = 0,
            val;
&nbsp;
        while (len) {
          val = parseInt(ccNum.charAt(--len), 10);
          sum += (bit ^= 1) ? arr[val] : val;
        }
&nbsp;
        return sum &amp;&amp; sum % 10 === 0;
      };
    }([0, 2, 4, 6, 8, 1, 3, 5, 7, 9]));
&nbsp;
    // Node and other CommonJS-like environments that support module.exports.
    <span class="missing-if-branch" title="if path not taken" >I</span>if (typeof module !== 'undefined' &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >module.exports)</span> {
<span class="cstat-no" title="statement not covered" >      module.exports = card;</span>
&nbsp;
      //Browser.
    } else {
      global.card = card;
    }
&nbsp;
})( this );
&nbsp;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Mar 15 2015 22:16:22 GMT+0100 (CET)</div>
</div>

<script src="prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>

<script src="sorter.js"></script>
</body>
</html>
